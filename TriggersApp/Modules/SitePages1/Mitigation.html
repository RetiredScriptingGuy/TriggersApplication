<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
    <meta charset="utf-8" />
    <title></title>

    <!--[if gte mso 9]><xml>
    <mso:CustomDocumentProperties>
    <mso:_dlc_DocId msdt:dt="string">XCD4ME7X7URU-961093073-1653</mso:_dlc_DocId>
    <mso:_dlc_DocIdItemGuid msdt:dt="string">41106b15-7fd1-49e1-8b0b-af3d355d5f1c</mso:_dlc_DocIdItemGuid>
    <mso:_dlc_DocIdUrl msdt:dt="string">http://dev/sites/Trigger/_layouts/15/DocIdRedir.aspx?ID=XCD4ME7X7URU-961093073-1653, XCD4ME7X7URU-961093073-1653</mso:_dlc_DocIdUrl>
    </mso:CustomDocumentProperties>
    </xml><![endif]-->
    <script type="text/javascript" src="/_layouts/15/MicrosoftAjax.js"></script>
    <script type="text/javascript" src="/_layouts/15/sp.runtime.js"></script>
    <script type="text/javascript" src="/_layouts/15/sp.js"></script>

    <script src="../SiteAssets/TriggersApp/js/jquery.min.js"></script>
    <script src="../SiteAssets/TriggersApp/js/bootstrap.min.js"></script>

    <script src="../SiteAssets/TriggersApp/js/jquery.min.js"></script>
    <script src="../SiteAssets/TriggersApp/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="../SiteAssets/TriggersApp/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/triggers.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/custom.css" />



    <div class="container-fluid">
        <img src="../SiteAssets/TriggersApp/images/triggers_1a_dropshadow.png" />
    </div>
    <div class="section">
        <a id="login" href="../SitePages/Profile.html">My Profile</a>
        <div id="navpills" class="container">
            <div class="row">
                <div class="col-md-12">
                    <ul class="nav nav-pills">
                        <li><a href="../SitePages/Home.html">Home</a></li>
                        <li><a href="../SitePages/Triggers.html">Triggers</a></li>
                        <li><a href="../SitePages/Events.html">Events /Reviews</a></li>
                        <li><a href="../SitePages/Reports.html">Reports</a></li>
                        <li><a href="../SitePages/Drafts.html">Drafts</a></li>
                        <li class="active"><a href="../SitePages/Mitigation.aspx">Mitigation</a></li>
                        <li><a href="../SitePages/Feedback.aspx">Feedback</a></li>
                        <li><a href="../SitePages/Print.aspx">Print </a></li>
                        <li><a href="../SitePages/Acronyms.aspx">Acronyms</a></li>
                        <li><a href="../SitePages/References.aspx">References </a></li>

                    </ul>
                </div>
            </div>
        </div>
    </div>


</head>
<body>

    <script>
        $(document).ready(function () {
            var dataSet1 = [
		            ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],


            ];

               var dataSet2 = [
		            ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],
                    ["Trigger Here", "Issue Here", "Cost", "Sustainment", "John Doe", "Draft"],


            ];


                   var dataSet3 = [
		            ["ILA", "1-16-17", "Complete", "1-2-2017"],
		            ["DAB", "1-16-17", "Complete", "1-2-2017"],
		            ["SRR", "1-16-17", "Complete", "1-2-2017"]


            ];



    $('#events')
                .DataTable({
                    data:dataSet1,
                    columns:[
                       {title: "Trigger"},
                       {title: "Issue"},
                       {title: "Severity"},
                       {title: "Type"}
                    ],
                    "searching" : false,
                    "paging": false,
                    "info": false,
                    "initComplete": function () {
                        var api = this.api();
                        api.$('td').click(function () {
                            api.search(this.innerHTML).draw();
                        });
                    }

    //                initComplete: function() {

    //    this.api().columns().every( function () {
    //        var column = this;
    //        var select = $('<select><option value=""></option></select>')
    //            .appendTo( $(column.footer()).empty() )
    //            .on( 'change', function () {
    //                var val = $.fn.dataTable.util.escapeRegex(
    //                    $(this).val()
    //                    );
    //                column
    //                    .search( val ? '^'+val+'$': '', true, false )
    //                    .draw();
    //                } );



    //        column.data().unique().sort().each( function ( d, j ) {

    //            select.append('<option value="' + d + '">' + d + '</option>');

    //        } );

    //    } );

    //}  //end of init

        });

             var clientContext;
        var web;
        var list;
        var currentUser;

        clientContext = SP.ClientContext.get_current();
        web = clientContext.get_web();
        clientContext.load(web);
        currentUser = web.get_currentUser();
		clientContext.load(currentUser);


        clientContext.executeQueryAsync(
           function(){
              currentUser = web.get_currentUser();
              var longUserName = currentUser.get_loginName();
			 // var startIndex = longUserName.lastIndexOf('\\');
			//  var thisUser = longUserName.substr(startIndex + 1);
             var $element = $("#login") ;
             if($element){
                 $element.html(longUserName);
                 $element.attr('href','../SitePages/Profile.html?Name=' + longUserName);
             }
           },
           function(){alert("Request failed")}
           );





                $('#issuedrafts tbody').on('click', 'tr', function(){
                   if($(this).hasClass('selected')){
                      $(this).removeClass('selected');
                   }
                   else
                   {
                      table1.$('tr selected').removeClass('selected');
                      $(this).addClass('selected');
                   }

                });



         var table1=       $('#issuedrafts')
                .DataTable({
                     data:dataSet1,
                     columns:[
                     	{title: "Trigger"},
                     	{title: "Issue"},
                     	{title: "Type"},
                     	{title: "Phase"},
                     	{title: "CreatedBy"},
                     	{title: "Workflow"}
                     	],
                       "searching" : false,
                       "paging": false,
                       "info": false

                });

                $('#riskdrafts tbody').on('click', 'tr', function () {
                    if ($(this).hasClass('selected')) {
                        $(this).removeClass('selected');
                    }
                    else {
                        table2.$('tr selected').removeClass('selected');
                        $(this).addClass('selected');
                    }

                });


		var table2 =		$('#riskdrafts')
                .DataTable({
                      data:dataSet2,
                     columns:[
                     	{title: "Trigger"},
                     	{title: "Issue"},
                     	{title: "Type"},
                     	{title: "Phase"},
                     	{title: "CreatedBy"},
                     	{title: "Workflow"}
                     	],
                        "searching" : false,
                        "paging": false,
                        "info": false

                });



	  	 //getMyIssues();
	  	 //getRisks();
	  	 //getEvents();

	  });

    </script>


    <div class='outer' style="margin:20px;">
        <div class='fullTopHalf' style="width:96%;">
            <H2>Issue Drafts</H2>


            <div class='quadrant1' style="width:95%;">
                <table class="display" id="issuedrafts" style="margin:20px;">
                    <thead>
                        <tr>
                            <th>
                                Trigger
                            </th>
                            <th>
                                Issue
                            </th>
                            <th>
                                Type
                            </th>
                            <th>
                                Phase
                            </th>
                            <th>
                                Created By
                            </th>
                            <th>
                                Workflow
                            </th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

    </div>



</html>