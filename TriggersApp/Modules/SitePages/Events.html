<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
    <meta charset="utf-8" />
    <title></title>

    <!--[if gte mso 9]><xml>
    <mso:CustomDocumentProperties>
    <mso:_dlc_DocId msdt:dt="string">XCD4ME7X7URU-1497597693-6</mso:_dlc_DocId>
    <mso:_dlc_DocIdItemGuid msdt:dt="string">f14a351e-2c23-4cdc-99f8-ae24a32732d9</mso:_dlc_DocIdItemGuid>
    <mso:_dlc_DocIdUrl msdt:dt="string">http://dev/sites/Trigger/_layouts/15/DocIdRedir.aspx?ID=XCD4ME7X7URU-1497597693-6, XCD4ME7X7URU-1497597693-6</mso:_dlc_DocIdUrl>
    </mso:CustomDocumentProperties>
    </xml><![endif]-->
    <script type="text/javascript" src="/_layouts/15/MicrosoftAjax.js"></script>
    <script type="text/javascript" src="/_layouts/15/sp.runtime.js"></script>
    <script type="text/javascript" src="/_layouts/15/sp.js"></script>

    <script src="../SiteAssets/TriggersApp/js/jquery.min.js"></script>
    <script src="../SiteAssets/TriggersApp/js/bootstrap.min.js"></script>

    <script src="../SiteAssets/TriggersApp/js/jquery.min.js"></script>
    <script src="../SiteAssets/TriggersApp/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="../SiteAssets/TriggersApp/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/triggers.css" />
    <link rel="stylesheet" type="text/css" href="../SiteAssets/TriggersApp/css/custom.css" />



    <div class="container-fluid">
        <img src="../SiteAssets/TriggersApp/images/triggers_1a_dropshadow.png" />
    </div>
    <div class="section">
        <a id="login" href="#">My Profile</a>
        <div id="navpills" class="container">
            <div class="row">
                <div class="col-md-12">
                    <ul class="nav nav-pills">
                        <li>
                            <a href="../SitePages/Home.aspx">Home</a>
                        </li>
                        <li><a href="../SitePages/Triggers.aspx">Triggers</a></li>
                        <li class="active"><a href="../SitePages/Events.aspx">Events /Reviews</a></li>
                        <li><a href="../SitePages/Reports.aspx">Reports</a></li>
                        <li><a href="../SitePages/Drafts.aspx">Drafts</a></li>
                        <li><a href="../SitePages/Mitigation.aspx">Mitigation</a></li>
                        <li><a href="../SitePages/Feedback.aspx">Feedback</a></li>
                        <li><a href="../SitePages/Print.aspx">Print </a></li>
                        <li><a href="../SitePages/Acronyms.aspx">Acronyms</a></li>
                        <li><a href="../SitePages/References.aspx">References </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</head>
<body>
    <script>
        $(document).ready(function () {
            var dataSet1 = [
		            ["Over-Flying", "Spares Shortfall", "High", "Cost"],
                    ["Over-Flying", "Depot Throughput", "High", "Schedule"],
                    ["Over-Flying", "SLEP", "High", "Performance"]


            ];

                   var dataSet2 = [
		             ["Over-Flying", "Spares Shortfall", "High", "Cost"],
                    ["Over-Flying", "Depot Throughput", "High", "Schedule"],
                    ["Over-Flying", "SLEP", "High", "Performance"]
            ];

                   var dataSet3 = [
		            ["ILA", "1-16-17", "Complete", "1-2-2017"],
		            ["DAB", "1-16-17", "Complete", "1-2-2017"],
		            ["SRR", "1-16-17", "Complete", "1-2-2017"]


            ];



    $('#events')
                .DataTable({
                    data:dataSet1,
                    columns:[
                       {title: "Trigger"},
                       {title: "Issue"},
                       {title: "Severity"},
                       {title: "Type"}
                    ],
                    "searching" : false,
                    "paging": false,
                    "info": false,
                    "initComplete": function () {
                        var api = this.api();
                        api.$('td').click(function () {
                            api.search(this.innerHTML).draw();
                        });
                    }

    //                initComplete: function() {

    //    this.api().columns().every( function () {
    //        var column = this;
    //        var select = $('<select><option value=""></option></select>')
    //            .appendTo( $(column.footer()).empty() )
    //            .on( 'change', function () {
    //                var val = $.fn.dataTable.util.escapeRegex(
    //                    $(this).val()
    //                    );
    //                column
    //                    .search( val ? '^'+val+'$': '', true, false )
    //                    .draw();
    //                } );



    //        column.data().unique().sort().each( function ( d, j ) {

    //            select.append('<option value="' + d + '">' + d + '</option>');

    //        } );

    //    } );

    //}  //end of init

        });

                var clientContext;
        var web;
        var list;
        var currentUser;

        clientContext = SP.ClientContext.get_current();
        web = clientContext.get_web();
        clientContext.load(web);
        currentUser = web.get_currentUser();
		clientContext.load(currentUser);


        clientContext.executeQueryAsync(
           function(){
              currentUser = web.get_currentUser();
              var longUserName = currentUser.get_loginName();
			 // var startIndex = longUserName.lastIndexOf('\\');
			//  var thisUser = longUserName.substr(startIndex + 1);
             var $element = $("#login") ;
             if($element){
                 $element.html(longUserName);
                 $element.attr('href','../SitePages/Profile.html?Name=' + longUserName);
             }
           },
           function(){alert("Request failed")}
           );


           var table1 = $('#events').DataTable();



                $('#events tbody').on('click', 'tr', function(){
                   if($(this).hasClass('selected')){
                      $(this).removeClass('selected');
                   }
                   else
                   {
                      table1.$('tr selected').removeClass('selected');
                      $(this).addClass('selected');
                   }

                });



                $('#risks')
                .DataTable({
                     data:dataSet2,
                     columns:[
                     	{title: "Trigger"},
                     	{title: "Issue"},
                     	{title: "Severity"},
                     	{title: "Type"}
                     	],
                       "searching" : false,
                       "paging": false,
                       "info": false

                });

                $('#risks tbody').on('click', 'tr', function () {
                    if ($(this).hasClass('selected')) {
                        $(this).removeClass('selected');
                    }
                    else {
                        table1.$('tr selected').removeClass('selected');
                        $(this).addClass('selected');
                    }

                });


				$('#reviews')
                .DataTable({
                     data:dataSet3,
                     columns:[
                     	{title: "Event/Review"},
                     	{title: "Due Date"},
                     	{title: "Status"},
                     	{title: "Date Completed"}
                     	],
                        "searching" : false,
                        "paging": false,
                        "info": false

                });

				$('#reviews tbody').on('click', 'tr', function () {
				    if ($(this).hasClass('selected')) {
				        $(this).removeClass('selected');
				    }
				    else {
				        table1.$('tr selected').removeClass('selected');
				        $(this).addClass('selected');
				    }

				});

	  	 //getMyIssues();
	  	 //getRisks();
	  	 //getEvents();

	  });

    </script>


    <div class='outer'>
        <div class='fullTopHalf'>
            <H2>My Program Issues</H2>
            <div class='quadrant1'>
                <div class='gridView'>
                    <table class="display" id="events">
                        <thead>
                            <tr>
                                <th>
                                    Event
                                </th>
                                <th>
                                    Program
                                </th>
                                <th>
                                    POA
                                </th>
                                <th>
                                    Due Date
                                </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>




            <div class='quadrant2'>
                <div class='cube'>

                    <table>
                        <tr>
                            <td rowspan=5 style='border: none; transform: rotate(-90deg)'>Likelihood</td>
                            <td style='text-align: right; border: none; width: 25px;'>5 &nbsp;</td>
                            <td id='51' style='background-color: #66ff33'>X</td>
                            <td id='52' style='background-color: #ffff00'>X</td>
                            <td style='background-color: #e60000' id='53'>X</td>
                            <td id='54' style='background-color: #e60000'>X</td>
                            <td id='55' style='background-color: #e60000'>X</td>
                        </tr>
                        <tr><td style='text-align: right; border: none; width: 25px;'>4 &nbsp;</td><td id='41' style='background-color: #66ff33'>X</td><td id='42' style='background-color: #ffff00'>X</td><td style='background-color: #ffff00' id='43'>X</td><td id='44' style='background-color: #e60000'>X</td><td id=45 style='background-color: #e60000'>X</td></tr>
                        <tr><td style='text-align: right; border: none; width: 25px;'>3 &nbsp;</td><td id='31' style='background-color: #66ff33'>X</td><td id='32' style='background-color: #66ff33'>X</td><td style='background-color: #ffff00'>X</td><td style='background-color: #ffff00'>X</td><td style='background-color: #e60000'>X</td></tr>
                        <tr><td style='text-align: right; border: none; width: 25px;'>2 &nbsp;</td><td id='21' style='background-color: #66ff33'>X</td><td id='22' style='background-color: #66ff33'>X</td><td id='23' style='background-color: #66ff33'>X</td><td style='background-color: #ffff00'>X</td><td style='background-color: #ffff00'>X</td></tr>
                        <tr><td style='text-align: right; border: none; width: 25px;'>1 &nbsp;</td><td id='11' style='background-color: #66ff33'>X</td><td id='12' style='background-color: #66ff33'>X</td><td id='13' style='background-color: #66ff33'>X</td><td id='14' style='background-color: #66ff33'>X</td><td style='background-color: #ffff00'>X</td></tr>
                        <tr><td style='border: none; height: 25px;'>&nbsp;</td><td style='border: none; height: 25px;'>&nbsp;</td><td style='vertical-align: top; border: none; height: 25px;'>1</td><td style='vertical-align: top; border: none; height: 25px'>2</td><td style='vertical-align: top; border: none; height: 25px'>3</td><td style='vertical-align: top; border: none; height: 25px'>4</td><td style='vertical-align: top; border: none; height: 25px'>5</td></tr>
                        <tr><td style='border: none; height: 25px;'>&nbsp;</td><td colspan=6 style='border: none; text-align: center; vertical-align: top'><br />&nbsp; Consequence</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <div class='fullBottomHalf'>
            <div class='quadrant3'>
                <H2>Program Risks</H2>
                <div class='gridView'>
                    <table class="display" id="risks">
                        <thead>
                            <tr>
                                <th>
                                    Event
                                </th>
                                <th>
                                    Program
                                </th>
                                <th>
                                    POA
                                </th>
                                <th>
                                    Due Date
                                </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>


            </div>
            <div class='quadrant4'>
                <H2>Program Events / Reviews</H2>
                <div class='gridView'>
                    <table class="display" id="reviews">
                        <thead>
                            <tr>
                                <th>
                                    Event
                                </th>
                                <th>
                                    Program
                                </th>
                                <th>
                                    POA
                                </th>
                                <th>
                                    Due Date
                                </th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

            </div>
        </div>

    </div>



</html>